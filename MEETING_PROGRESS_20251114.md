# 🤖 Mobile VLA 데이터 수집 진행 보고 (2025-11-14)

---

## 📊 현재 수집 현황

### 전체 진행률
- **총 수집**: 221개 / 1,000개 (22.1%) 🎉
- **수집 기간**: 2025-11-06 ~ 2025-11-14
- **평균 수집 속도**: ~28개/일 (오늘 85개 수집!)
- **오늘(11/14) 수집**: 85개 (1box_left: 54개, 1box_right: 31개)

### 시나리오별 현황 (4개 시나리오)

| 시나리오 | 현재 | 목표 | 진행률 | 상태 |
|---------|------|------|--------|------|
| **1box_left** | 159개 | 250개 | 63.6% | 🟢🟢 진행 중 |
| **1box_right** | 62개 | 250개 | 24.8% | 🟡🟡 수집 중 |
| **2box_left** | 0개 | 250개 | 0% | ⚪ 미시작 |
| **2box_right** | 0개 | 250개 | 0% | ⚪ 미시작 |

### 시간대별 분포

| 시간대 | 수집량 | 목표 | 진행률 |
|--------|--------|------|--------|
| 저녁 (18:00-24:00) | 104개 | - | - |
| 밤 (00:00-06:00) | 28개 | 500개 | 5.6% |
| 아침 (06:00-12:00) | 3개 | - | - |
| 새벽 (12:00-18:00) | 1개 | - | - |

> 💡 **참고**: 밤 시간대(20:00-22:00)가 주 학습 데이터로 목표 500개

---

## 🎯 1box_left & 1box_right 수집 전략

### ✅ 환각 없는 확인 결과

**질문**: 1box_left와 1box_right를 같이 수집하는 게 맞는지?

**답변**: ✅ **예, 맞습니다!**

#### 근거
1. **서로 다른 시나리오**:
   - `1box_left`: 1박스-왼쪽경로 시나리오 (독립된 시나리오)
   - `1box_right`: 1박스-오른쪽경로 시나리오 (독립된 시나리오)
   - 각각 250개씩 목표 (총 500개)

2. **명명 규칙**:
   ```
   시나리오 ID: 1box_left, 1box_right (통계용)
   파일명: episode_{timestamp}_1box_hori_left_core_medium.h5
   
   매핑 규칙:
   - 1box_hori_left → 1box_left (통계)
   - 1box_vert_left → 1box_left (통계)
   - 1box_hori_right → 1box_right (통계)
   - 1box_vert_right → 1box_right (통계)
   ```

3. **코드 근거** (`mobile_vla_data_collector.py:1842-1845`):
   ```python
   old_to_new = {
       "1box_vert_left": "1box_left", "1box_hori_left": "1box_left",
       "1box_vert_right": "1box_right", "1box_hori_right": "1box_right",
       ...
   }
   ```

4. **배치 타입(hori/vert) 설명**:
   - 현재 기본값: `hori` (가로 배치)
   - 학습 코드에서 vert/hori 명령어 동일
   - 메타데이터로만 저장, 실제 학습에 미사용
   - 수집 단순화를 위해 선택 단계 제거됨

### 📋 권장 수집 순서

#### Phase 1: 1box 시나리오 완료 (우선순위 높음)
```
현재 상태:
├── 1box_left: 105/250 (42.0%) ← 계속 수집
└── 1box_right: 31/250 (12.4%) ← 병행 수집 필요

목표:
├── 1box_left: 145개 추가 수집 필요
└── 1box_right: 219개 추가 수집 필요
```

**전략**:
1. **균형 수집**: 1box_left와 1box_right를 번갈아 수집
   - 하루: 1box_left 10개 + 1box_right 10개
   - 예상 소요: ~20일

2. **집중 수집**: 1box_left 먼저 완료 후 1box_right
   - 1box_left: ~10일
   - 1box_right: ~15일
   - 총 예상: ~25일

#### Phase 2: 2box 시나리오 시작
```
├── 2box_left: 250개 목표
└── 2box_right: 250개 목표
```

---

## 📁 현재 수집 데이터 상세

### 파일 분포
```
총 136개 에피소드:
├── 1box_hori_left_core_medium: 93개
├── 1box_hori_right_core_medium: 31개
└── 1box_hori_left_core_medium_evening: 12개
```

### 패턴별 현황
- **Core 패턴**: medium 위치만 수집 중
- **거리별**:
  - Close: 미수집
  - Medium: 136개 (전체)
  - Far: 미수집

> ⚠️ **주의**: 거리별 다양성 확보 필요 (close/medium/far)

### 각 에피소드 구조
- **프레임 수**: 18개 (초기 1개 + 액션 17개)
- **파일 크기**: 평균 ~25MB
- **데이터 포함**: 이미지, 액션, 상태, 메타데이터

---

## ⚙️ 최근 기술 개선 사항

### 1. 자동 측정(A) 반복 모드 수정 (2025-11-13)
- **문제**: A로 50회 반복 설정 → 첫 측정 후 N 키 → 수동 모드로 전환됨
- **원인**: `auto_measurement_mode` 플래그가 너무 일찍 리셋됨
- **해결**: 모든 반복이 완료될 때까지 플래그 유지
- **결과**: ✅ 반복 측정 모드 정상 작동 확인

### 2. 프레임 수 정규화 (2025-11-13)
- **문제**: 19프레임 수집 (초기 1개 + 액션 18개)
- **해결**: 17개 액션으로 정규화 (초기 1개 + 액션 17개 = 18프레임)
- **결과**: ✅ 18프레임 정상 수집

### 3. 자동 복귀(B) 최적화
- **개선**: 정지 신호 최소화 (0.4초/액션)
- **결과**: 부드러운 복귀 동작

---

## 🚀 다음 단계 (Action Items)

### 즉시 진행
1. **1box_right 집중 수집**
   - 현재 31개 → 목표 100개 (단기)
   - 균형 맞추기 위해 우선순위 상향

2. **거리별 다양성 확보**
   - Close 위치 수집 시작
   - Far 위치 수집 시작
   - Medium과 균형 맞추기

### 중기 계획 (2주 내)
3. **1box 시나리오 완료**
   - 1box_left: 250개 달성
   - 1box_right: 250개 달성

4. **시간대별 균형**
   - 밤 시간대(20:00-22:00) 집중 수집
   - 목표: 500개 중 현재 ~30개만 해당

### 장기 계획
5. **2box 시나리오 시작**
   - 2box_left 수집 시작
   - 2box_right 수집 시작

---

## 📈 예상 완료 일정

### 낙관적 시나리오 (하루 20개)
- 1box 완료: ~18일 (364개 남음)
- 2box 완료: +25일
- **총 예상**: ~43일 (12월 말)

### 현실적 시나리오 (하루 15개)
- 1box 완료: ~24일
- 2box 완료: +34일
- **총 예상**: ~58일 (1월 중순)

### 보수적 시나리오 (하루 10개)
- 1box 완료: ~36일
- 2box 완료: +50일
- **총 예상**: ~86일 (2월 초)

---

## 💡 권장 사항

### 1. 수집 전략
- ✅ **1box_left와 1box_right 병행 수집** (균형 유지)
- ✅ 거리별 다양성 확보 (close/medium/far)
- ✅ 시간대별 균형 (특히 밤 시간대)

### 2. 효율성 개선
- 자동 측정(A) 반복 모드 적극 활용
- 배치 수집: 한 번에 10-20개씩
- 자동 복귀(B) 기능으로 시간 절약

### 3. 품질 관리
- 18프레임 정상 수집 확인 (✅ 완료)
- 패턴별 다양성 확보 (Core/Variant)
- 주기적 데이터 검증

---

## 📌 핵심 결론

### 1box_left & 1box_right 수집 전략
- ✅ **둘 다 별개의 시나리오로 각각 250개씩 필요**
- ✅ **병행 수집 권장** (균형 유지)
- ✅ **1box_right 우선순위 상향** (현재 12.4%만 완료)

### 다음 미팅까지 목표
- 1box_left: 150개 달성 (+45개)
- 1box_right: 80개 달성 (+49개)
- Close/Far 위치 수집 시작
- **총 목표**: 230개 (+94개, 주간 목표)

---

**보고서 작성일**: 2025-11-14  
**다음 업데이트**: 1주일 후

