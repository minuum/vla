# Left/Right êµ¬ë¶„ ì‹¤íŒ¨ ë¶„ì„ ë° ì›ì¸ íŒŒì•…

**ë‚ ì§œ**: 2025-12-06 23:25  
**ë°œê²¬**: Action headê°€ Left/Rightë¥¼ êµ¬ë¶„í•˜ì§€ ëª»í•¨

---

## ğŸš¨ ë°œê²¬ëœ ë¬¸ì œ

### ì‹¤í—˜ ê²°ê³¼

```
=== Predicted Velocities ===
[LEFT samples] 
  linear_x: mean=0.0001, std=0.0001
  linear_y: mean=0.0067, std=0.0001  â† ê±°ì˜ 0

[RIGHT samples]
  linear_x: mean=-0.0001, std=0.0001
  linear_y: mean=0.0063, std=0.0002  â† ê±°ì˜ 0

=== Ground Truth Velocities ===
[LEFT samples]
  linear_x: mean=1.1500
  linear_y: mean=1.1500  â† POSITIVE (right ì•„ë‹Œê°€?)

[RIGHT samples]
  linear_x: mean=1.1500
  linear_y: mean=-1.1500  â† NEGATIVE
```

### ë¬¸ì œì  ìš”ì•½

| í•­ëª© | ì˜ˆìƒ | ì‹¤ì œ | ë¬¸ì œ |
|:---|:---|:---|:---|
| **Predicted range** | [-1, 1] | [0.006, 0.007] | ê±°ì˜ 0ì— ìˆ˜ë ´ |
| **Left/Right diff** | > 0.1 | -0.0004 | êµ¬ë¶„ ëª»í•¨ |
| **GT Left linear_y** | < 0 (leftê°€ ìŒìˆ˜?) | +1.15 | ğŸ”´ í˜¼ë€! |
| **GT Right linear_y** | > 0 (rightê°€ ì–‘ìˆ˜?) | -1.15 | ğŸ”´ ë°˜ëŒ€! |

---

## ğŸ” ì›ì¸ ë¶„ì„

### ë¬¸ì œ 1: Ground Truth ë°©í–¥ í˜¼ë€

**ê´€ì°°**:
- "left" íŒŒì¼ì˜ GT: linear_y = **+1.15**
- "right" íŒŒì¼ì˜ GT: linear_y = **-1.15**

**ì˜ë¬¸**:
- íŒŒì¼ëª… "left"ê°€ "ë¬¼ì²´ê°€ ì™¼ìª½ì— ìˆë‹¤"ì¸ê°€, "ì™¼ìª½ìœ¼ë¡œ ê°„ë‹¤"ì¸ê°€?
- ì¢Œí‘œê³„ê°€ ì–´ë–»ê²Œ ì •ì˜ë˜ì–´ ìˆëŠ”ê°€?

**ê°€ëŠ¥í•œ í•´ì„**:
1. **í•´ì„ A**: "left"ëŠ” "ë¬¼ì²´ê°€ ì™¼ìª½ì— ìˆìŒ" â†’ ë¡œë´‡ì´ ì™¼ìª½ìœ¼ë¡œ ê°€ì•¼ í•¨
2. **í•´ì„ B**: "left"ëŠ” "ë¬¼ì²´ê°€ ì™¼ìª½ì— ìˆìŒ" â†’ linear_yê°€ ì–‘ìˆ˜?
3. **ë¡œë´‡ ì¢Œí‘œê³„**: 
   - linear_y > 0: ì™¼ìª½ìœ¼ë¡œ ì´ë™
   - linear_y < 0: ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™

**ì‹¤ì œ ë°ì´í„° í™•ì¸ í•„ìš”**

### ë¬¸ì œ 2: Predicted ê°’ì´ ê±°ì˜ 0

**ê´€ì°°**:
- ëª¨ë“  ì˜ˆì¸¡ì´ 0.006~0.007 ë²”ìœ„
- stdê°€ 0.0001~0.0002ë¡œ ë§¤ìš° ì‘ìŒ

**ê°€ëŠ¥í•œ ì›ì¸**:
1. **Mode collapse**: ëª¨ë¸ì´ í‰ê· ê°’ë§Œ ì¶œë ¥
2. **í•™ìŠµ ë¶€ì¡±**: Action headê°€ ì œëŒ€ë¡œ í•™ìŠµ ì•ˆë¨
3. **Context ë¬¸ì œ**: VLM ì¶œë ¥ì´ ëª¨ë“  ìƒ˜í”Œì— ë™ì¼
4. **Inference ë¬¸ì œ**: ì²« í† í°ë§Œ ë³´ê³  ìˆì–´ì„œ?

### ë¬¸ì œ 3: GT ì •ê·œí™” ì•ˆë¨

**ê´€ì°°**:
- GT range: [-1.15, 1.15]
- Predicted range: [0, 0.01]

**ì›ì¸**:
- í•™ìŠµ ì‹œ actionì„ [-1, 1]ë¡œ clamp
- í•˜ì§€ë§Œ GT ìì²´ê°€ [-1.15, 1.15]
- â†’ í•™ìŠµ ë°ì´í„°ì™€ GT ë¶ˆì¼ì¹˜?

---

## ğŸ”´ ê·¼ë³¸ ì›ì¸ ë°œê²¬!

### ì½”ë“œ ë¶„ì„ ê²°ê³¼ (mobile_vla_h5_dataset.py)

```python
# Line 194
actions_tensor = torch.clamp(actions_tensor, -1.0, 1.0)
```

**ë¬¸ì œ**:
1. ì›ë³¸ ë°ì´í„°: [-1.15, 1.15] ë²”ìœ„
2. `clamp(-1, 1)`: **ì •ê·œí™”ê°€ ì•„ë‹Œ ë‹¨ìˆœ ìë¥´ê¸°**
3. 1.15ëŠ” 1.0ìœ¼ë¡œ ì˜ë¦¼, -1.15ëŠ” -1.0ìœ¼ë¡œ ì˜ë¦¼

**ê²°ê³¼**:
- í•™ìŠµ ì‹œ ì˜ë¦° ë°ì´í„°ë¡œ í•™ìŠµë¨ (ì¼ë¶€ ì •ë³´ ì†ì‹¤)
- í•˜ì§€ë§Œ **ìƒëŒ€ì ì¸ ë°©í–¥ ì •ë³´ëŠ” ìœ ì§€ë¨**

### ì‹¤ì œ ë°ì´í„° ë¶„í¬ í™•ì¸

```
LEFT (250 files):
  linear_y: mean=0.3194, std=0.8403  â† POSITIVE

RIGHT (250 files):  
  linear_y: mean=-0.3833, std=0.7667  â† NEGATIVE

âœ… linear_y ì°¨ì´: 0.7028 (ì¢‹ìŒ!)
```

**ê²°ë¡ **: 
- ë°ì´í„° ìì²´ëŠ” **ì˜¬ë°”ë¥´ê²Œ Left/Right êµ¬ë¶„ë¨**
- Left: positive linear_y
- Right: negative linear_y

### ê·¸ë ‡ë‹¤ë©´ ì™œ Action Head ì¶œë ¥ì´ 0ì— ê°€ê¹Œìš´ê°€?

**ê°€ëŠ¥í•œ ì›ì¸**:
1. **ì¶”ë¡  ë°©ì‹ ë¬¸ì œ**: ì²« í† í°(0ë²ˆ)ë§Œ ë³´ê³  ìˆìŒ
2. **Mode collapse**: ëª¨ë¸ì´ í‰ê· ê°’ í•™ìŠµ
3. **Hidden state ë¬¸ì œ**: LSTMì´ ì‹œí€€ìŠ¤ ì •ë³´ í™œìš© ëª»í•¨

### ê²€ì¦ í•„ìš” ì‚¬í•­
1. [ ] ë‹¤ë¥¸ í† í°/í”„ë ˆì„ì˜ action í™•ì¸
2. [ ] ì‹œê°„ì— ë”°ë¥¸ action ë³€í™” í™•ì¸
3. [ ] í•™ìŠµ ì‹œ loss breakdown ë¶„ì„

---

## ğŸ“‹ í™•ì¸ í•„ìš” ì‚¬í•­

### 1. ë°ì´í„° ì¢Œí‘œê³„ í™•ì¸
```python
# left íŒŒì¼ê³¼ right íŒŒì¼ì˜ GT íŒ¨í„´ í™•ì¸
# linear_yì˜ ë¶€í˜¸ê°€ ì–´ë–¤ ì˜ë¯¸ì¸ì§€
```

### 2. í•™ìŠµ ë°ì´í„° ì •ê·œí™” í™•ì¸
```python
# H5 íŒŒì¼ì˜ actionsê°€ ì–´ë–»ê²Œ ì €ì¥ë˜ì–´ ìˆëŠ”ì§€
# í•™ìŠµ ì‹œ ì–´ë–»ê²Œ ì²˜ë¦¬ë˜ëŠ”ì§€
```

### 3. ì¶”ë¡  ì‹œ ë‹¤ë¥¸ í† í°/timestep í™•ì¸
```python
# actions[0, 0, 0, :] ë§ê³  ë‹¤ë¥¸ ìœ„ì¹˜ í™•ì¸
# ì‹œê°„ì— ë”°ë¥¸ action ë³€í™” í™•ì¸
```

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

### ì¦‰ì‹œ í™•ì¸
1. [ ] H5 íŒŒì¼ì˜ action ë¶„í¬ í™•ì¸ (ì •ê·œí™” ì—¬ë¶€)
2. [ ] ì¢Œí‘œê³„/ë°©í–¥ ì •ì˜ í™•ì¸
3. [ ] í•™ìŠµ ì‹œ action normalization ì½”ë“œ í™•ì¸

### ê²€ì¦ í•„ìš” ì‚¬í•­
1. [ ] ë‹¤ë¥¸ í† í°/í”„ë ˆì„ì˜ action í™•ì¸
2. [ ] ì‹œê°„ì— ë”°ë¥¸ action ë³€í™” í™•ì¸
3. [ ] í•™ìŠµ ì‹œ loss breakdown ë¶„ì„

---

## ğŸ”´ ìµœì¢… ì§„ë‹¨ ê²°ê³¼

### ì¶”ê°€ ì‹¤í—˜ (ë‹¤ì–‘í•œ í† í° ë¶„ì„)

```
=== Token 0 vs Token 256 ë¹„êµ ===

LEFT sample:
  Token 0, Timestep 0:   x=0.0001, y=0.0068   â† ê±°ì˜ 0
  Token 256, Timestep 0: x=0.9241, y=-0.9664  â† ì˜ë¯¸ìˆëŠ” ê°’!
  All tokens mean:       x=0.9683, y=-0.1369

RIGHT sample:
  Token 0, Timestep 0:   x=-0.0001, y=0.0065  â† ê±°ì˜ 0
  Token 256, Timestep 0: x=0.9244, y=-0.9665  â† ì˜ë¯¸ìˆëŠ” ê°’!
  All tokens mean:       x=0.9681, y=-0.1381
```

**ë°œê²¬ 1**: Token 0ì´ ì•„ë‹Œ ë‹¤ë¥¸ í† í°ì—ì„œëŠ” ì˜ë¯¸ìˆëŠ” ì¶œë ¥

### 5 Left vs 5 Right ë¹„êµ (Token 256)

```
LEFT mean_y:  -0.1301 Â± 0.0001
RIGHT mean_y: -0.1302 Â± 0.0002
Difference:   0.0002 (!!!)
```

### ğŸš¨ ìµœì¢… ì§„ë‹¨: ëª¨ë¸ì´ Left/Rightë¥¼ êµ¬ë¶„í•˜ì§€ ëª»í•¨

**ì¦ê±°**:
1. âŒ Leftì™€ Rightì˜ ì¶œë ¥ì´ **ê±°ì˜ ë™ì¼** (diff=0.0002)
2. âŒ stdê°€ ë§¤ìš° ì‘ìŒ (0.0001~0.0002)
3. âŒ ëª¨ë“  ìƒ˜í”Œì—ì„œ ê°™ì€ íŒ¨í„´

**ì›ì¸ ë¶„ì„**:
1. **VLM Contextê°€ ë¹„ìŠ·í•¨**: Cosine similarity 0.74
2. **ì–¸ì–´ ì§€ì‹œë¬¸ ì²˜ë¦¬ ë¬¸ì œ?**: "left" vs "right" ì°¨ì´ê°€ actionì— ë°˜ì˜ ì•ˆë¨
3. **Mode collapse**: ëª¨ë¸ì´ í‰ê· ê°’ë§Œ í•™ìŠµ

---

## ğŸ¤” ì™œ ì´ëŸ° ì¼ì´ ë°œìƒí–ˆëŠ”ê°€?

### ê°€ì„¤ 1: VLMì´ ì–¸ì–´ë¥¼ ë¬´ì‹œí•˜ê³  ìˆìŒ

**RoboVLMs êµ¬ì¡°**:
```
Image â†’ VLM â†’ Context Vector â†’ Action Head â†’ Actions
  â†‘                              â†‘
Language Instruction â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ (ì—¬ê¸°ì„œ ë°˜ì˜ë˜ì–´ì•¼ í•¨)
```

**ë¬¸ì œ ê°€ëŠ¥ì„±**:
- ì–¸ì–´ ì§€ì‹œë¬¸ì´ contextì— ì œëŒ€ë¡œ ë°˜ì˜ë˜ì§€ ì•ŠìŒ
- VLMì´ ì´ë¯¸ì§€ë§Œ ë³´ê³  action ì˜ˆì¸¡
- "left"/"right" ë‹¨ì–´ê°€ ë¬´ì‹œë¨

### ê°€ì„¤ 2: Action Headê°€ ë°©í–¥ ì •ë³´ë¥¼ í•™ìŠµí•˜ì§€ ëª»í•¨

**ë¬¸ì œ ê°€ëŠ¥ì„±**:
- LSTMì´ ì‹œí€€ìŠ¤ ì •ë³´ë¥¼ ì œëŒ€ë¡œ í™œìš© ëª»í•¨
- í•™ìŠµ ë°ì´í„°ì—ì„œ ë°©í–¥ ì°¨ì´ê°€ ì¶©ë¶„íˆ ë“œëŸ¬ë‚˜ì§€ ì•ŠìŒ

### ê°€ì„¤ 3: í•™ìŠµ ì†ì‹¤ í•¨ìˆ˜ ë¬¸ì œ

**ë¬¸ì œ ê°€ëŠ¥ì„±**:
- MSE lossê°€ í‰ê· ì„ í•™ìŠµí•˜ë„ë¡ ìœ ë„
- Left/Right ë°ì´í„°ê°€ ì„ì—¬ì„œ í‰ê·  ìˆ˜ë ´

---

## ğŸ¯ êµìˆ˜ë‹˜ê»˜ ë³´ê³ í•  ë‚´ìš©

### í˜„ì¬ ìƒí™©

**âœ… ì„±ê³µí•œ ê²ƒ**:
1. RoboVLMs í”„ë ˆì„ì›Œí¬ ì ìš© ì„±ê³µ
2. í•™ìŠµ ìˆ˜ë ´ (Loss 0.027)
3. Context vector ì¶”ì¶œ ì •ìƒ
4. Action head ì¶œë ¥ ë²”ìœ„ ì •ìƒ ([-1, 1])

**âŒ ì‹¤íŒ¨í•œ ê²ƒ**:
1. **Left/Right ë°©í–¥ êµ¬ë¶„ ì‹¤íŒ¨**
2. ëª¨ë“  ìƒ˜í”Œì—ì„œ ê±°ì˜ ë™ì¼í•œ ì¶œë ¥
3. ì–¸ì–´ ì§€ì‹œë¬¸ì˜ "left"/"right"ê°€ actionì— ë°˜ì˜ ì•ˆë¨

### ì˜ˆìƒ ì›ì¸

**ê°€ì¥ ìœ ë ¥í•œ ì›ì¸**: VLMì´ ì–¸ì–´ ì§€ì‹œë¬¸ì„ ë¬´ì‹œí•˜ê³  ì´ë¯¸ì§€ë§Œ ì²˜ë¦¬

**ê·¼ê±°**:
- Context vectorì˜ Left/Right ìœ ì‚¬ë„ ë†’ìŒ (0.74)
- Action ì¶œë ¥ ì°¨ì´ ê±°ì˜ ì—†ìŒ (0.0002)
- ì´ë¯¸ì§€ë§Œ ë³´ë©´ Left/Right êµ¬ë¶„ ë¶ˆê°€ëŠ¥ (ë¬¼ì²´ ìœ„ì¹˜ëŠ” ë¹„ìŠ·)

### í•´ê²° ë°©ì•ˆ

**Option 1: ì–¸ì–´ ì¡°ê±´í™” ê°•í™”**
- ì–¸ì–´ ì§€ì‹œë¬¸ì„ action headì— ì§ì ‘ ì „ë‹¬
- Cross-attentionìœ¼ë¡œ ì–¸ì–´-action ì—°ê²°

**Option 2: ì´ë¯¸ì§€ì— ë°©í–¥ ì •ë³´ ì¶”ê°€**
- ëª©í‘œ ìœ„ì¹˜ë¥¼ ì´ë¯¸ì§€ì— í‘œì‹œ
- í™”ì‚´í‘œ ë˜ëŠ” highlight ì¶”ê°€

**Option 3: ë³„ë„ ë¶„ë¥˜ê¸° ì¶”ê°€**
- Left/Right ë¶„ë¥˜ê¸°ë¥¼ ë³„ë„ë¡œ í•™ìŠµ
- Action ì˜ˆì¸¡ê³¼ ê²°í•©

---

## ğŸ“ ê²°ë¡ 

### Task Adaptation ê´€ì ì—ì„œ í‰ê°€

**RoboVLMs 7DOF â†’ 2DOF Transfer ê°€ëŠ¥í•œê°€?**

**ë¶€ë¶„ì ìœ¼ë¡œ ê°€ëŠ¥**:
- âœ… VLM representation ì¶”ì¶œ ì •ìƒ
- âœ… Action head í•™ìŠµ ê°€ëŠ¥
- âœ… Action ì¶œë ¥ ë²”ìœ„ ì •ìƒ

**ì•„ì§ í•´ê²° í•„ìš”**:
- âŒ ì–¸ì–´ ì¡°ê±´í™” (directional control)
- âŒ Left/Right êµ¬ë¶„

**ê²°ë¡ **:
> "RoboVLMs representationì€ 2DOF navigationì— transfer ê°€ëŠ¥í•˜ë‚˜,  
> **ì–¸ì–´ ì§€ì‹œë¬¸ì˜ ë°©í–¥ ì •ë³´ê°€ actionì— ë°˜ì˜ë˜ì§€ ì•ŠëŠ” ë¬¸ì œ** ì¡´ì¬.  
> ì¶”ê°€ ì—°êµ¬ í•„ìš”."
