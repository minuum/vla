# κµμλ‹ λ―Έν… λΈλ¦¬ν•‘ (2025-11-06)

## β… DONE (μ™„λ£λ μ‘μ—…)

### 1. λ°μ΄ν„° μμ§‘ μ™„λ£
- **20251106 μ—ν”Όμ†λ“**: 13κ° HDF5 νμΌ μμ§‘ μ™„λ£
- **μ‹λ‚λ¦¬μ¤**: `1box_hori_left_core_medium` (λ°•μ¤ 1κ°, μΆμΈ΅, μ¤‘κ°„ λ‚μ΄λ„)
- **λ°μ΄ν„° κµ¬μ΅°**:
  - Images: (T, 720, 1280, 3) RGB
  - Actions: (T, 3) [linear_x, linear_y, angular_z]
  - μ΄ ν”„λ μ„: ~18 ν”„λ μ„/μ—ν”Όμ†λ“

```
ROS_action/mobile_vla_dataset/
β”β”€β”€ episode_20251106_145248_1box_hori_left_core_medium.h5
β”β”€β”€ episode_20251106_145456_1box_hori_left_core_medium.h5
β”β”€β”€ ... (μ΄ 13κ°)
```

### 2. LoRA Fine-tuning μ‹μ‘ β…
- **λ¨λΈ**: Kosmos-2 VLM (RoboVLMs upstream μ‚¬μ©)
- **λ°©λ²•**: LoRA (r=32, alpha=16, dropout=0.1)
- **μ„¤μ •**:
  - Action dim: 2 (linear_x, linear_y)
  - Window size: 8 ν”„λ μ„
  - Action chunk: 10 ν”„λ μ„
  - Batch size: 2
  - Learning rate: 1e-4
- **ν„μ¬ μƒνƒ**: 1 μ—ν¬ν¬ ν•™μµ μ§„ν–‰ μ¤‘ (PID: 1164522)
- **μμƒ μ‹κ°„**: ~5-10λ¶„/μ—ν¬ν¬

### 3. κΈ°μ μ  κ²°μ • μ™„λ£
- β… **VLA λ¨λΈ μƒλ΅ λ§λ“¤μ§€ μ•μ** β†’ RoboVLMs κΈ°μ΅΄ κµ¬μ΅° μ‚¬μ©
- β… **VLM νμΈνλ‹λ§ μ§„ν–‰** β†’ Kosmos-2 + LSTM Policy Head
- β… **LoRA μ„ νƒ** β†’ Full Fine-tuning λ€μ‹  (λ©”λ¨λ¦¬ ν¨μ¨)
- β… **2D μ•΅μ… κ³µκ°„** β†’ λ¨λ°”μΌ λ΅λ΄‡ (7D λ§¤λ‹ν“°λ μ΄ν„° μ•„λ‹)

---

## π“‹ TODO (μ§„ν–‰ μμ •)

### 1. 1 μ—ν¬ν¬ ν•™μµ μ™„λ£ λ° μ‹κ°„ μΈ΅μ •
- **λ©ν‘**: 1 μ—ν¬ν¬ ν•™μµ μ‹κ°„ μΈ΅μ •
- **μμƒ**: ~5-10λ¶„
- **λ‹¤μ**: 50 μ—ν¬ν¬ μ „μ²΄ ν•™μµ (μμƒ 4-8μ‹κ°„)

### 2. 100 Dataset μμ§‘ (November 6, 2025)
- **ν„μ¬**: 13κ° μ—ν”Όμ†λ“
- **λ©ν‘**: 100κ° μ—ν”Όμ†λ“
- **κ³„ν**:
  - λ‚® (13:00-15:00): 200κ°
  - λ°¤ (20:00-22:00): 500κ°
  - μƒλ²½ (00:00-04:00): 300κ°
- **μ‹λ‚λ¦¬μ¤ λ‹¤μ–‘ν™”**:
  - λ°•μ¤ κ°μ: 1κ°, 2κ°
  - μ„μΉ: μΆμΈ΅, μ°μΈ΅, μ¤‘μ•™
  - λ‚μ΄λ„: μ‰¬μ›€, μ¤‘κ°„, μ–΄λ ¤μ›€

### 3. μ¶”λ΅  ν…μ¤νΈ
- **λ©ν‘**: ν•™μµλ λ¨λΈλ΅ μ‹¤μ‹κ°„ μ¶”λ΅ 
- **ν™κ²½**: Jetson AGX Orin 16GB
- **μµμ ν™”**: TorchScript, FP16 μ–‘μν™”
- **μμƒ FPS**: ~10 FPS

### 4. μ„±λ¥ ν‰κ°€
- **λ©”νΈλ¦­**: MAE, MSE, Success Rate
- **λ²¤μΉλ§ν¬**: RoboVLMs CALVIN μ„±λ¥κ³Ό λΉ„κµ
- **λ©ν‘**: Mobile VLA νΉν™” μ„±λ¥ κ²€μ¦

---

## π’¬ DISCUSS (λ…Όμ ν•„μ”)

### 1. λ°μ΄ν„° μμ§‘ μ „λµ
**μ§λ¬Έ**: 100κ° μ—ν”Όμ†λ“ μμ§‘ μΌμ • λ° μ°μ„ μμ„?

**μµμ…**:
- A) λΉ λ¥Έ μμ§‘ (1-2μΌ, λ‹¨μΌ μ‹λ‚λ¦¬μ¤)
- B) λ‹¤μ–‘ν• μμ§‘ (1μ£ΌμΌ, λ‹¤μ–‘ν• μ‹λ‚λ¦¬μ¤)

**μ¶”μ²**: B (λ‹¤μ–‘ν• μ‹λ‚λ¦¬μ¤λ΅ μΌλ°ν™” μ„±λ¥ ν–¥μƒ)

### 2. LoRA vs Full Fine-tuning
**ν„μ¬ κ²°μ •**: LoRA (r=32)

**μ¥μ **:
- λ©”λ¨λ¦¬ ν¨μ¨ (Jetson 16GB μ μ•½)
- λΉ λ¥Έ ν•™μµ (νλΌλ―Έν„° <1%)
- λ°°ν¬ ν¨μ¨ (LoRA μ–΄λ‘ν„°λ§ ~50MB)

**λ‹¨μ **:
- Full FT λ€λΉ„ μ„±λ¥ μ €ν• κ°€λ¥μ„±

**λ…Όμ**: LoRAλ΅ λ¨Όμ € μ§„ν–‰ ν›„, ν•„μ”μ‹ Full FT κ³ λ ¤?

### 3. μ—ν¬ν¬ μ κ²°μ •
**ν„μ¬ μ„¤μ •**: 50 μ—ν¬ν¬

**κ·Όκ±°**:
- μ μ€ λ°μ΄ν„° (13κ° β†’ 100κ°)
- LoRAλ” λ” λ§μ€ μ—ν¬ν¬ ν•„μ”
- RoboVLMs: 5 μ—ν¬ν¬ (24K λ°μ΄ν„°)

**λ…Όμ**: 100κ° λ°μ΄ν„° μμ§‘ ν›„ μ—ν¬ν¬ μ μ¬μ΅°μ •?

### 4. λ…Όλ¬Έ μ‘μ„± κ³„ν
**λ©ν‘**: RoboVLMs + Robot Manipulator λ…Όλ¬Έ 2-3κ° (λ°©ν•™ μ¤‘)

**λ…Όμ ν¬μΈνΈ**:
- λ…Όλ¬Έ μ£Όμ  μ„ μ • (Mobile VLA, LoRA μµμ ν™”, μ‹¤μ‹κ°„ μ¶”λ΅  λ“±)
- ν¬κ³  ν•™ν/μ €λ„ μ„ μ •
- μ‹¤ν— κ³„ν λ° μΌμ •

### 5. ν•λ“μ›¨μ–΄ μ μ•½ λ€μ‘
**Jetson AGX Orin 16GB λ©”λ¨λ¦¬ μ μ•½**

**ν„μ¬ λ€μ‘**:
- LoRA μ‚¬μ©
- Batch size 2
- FP16 mixed precision
- Window size 8 (RoboVLMs: 16)

**λ…Όμ**: μ¶”κ°€ μµμ ν™” ν•„μ” μ—¬λ¶€?

---

## π“ ν•µμ‹¬ μμΉ μ”μ•½

| ν•­λ© | RoboVLMs | Mobile VLA | λΉ„κ³  |
|------|----------|------------|------|
| **λ¨λΈ** | Kosmos-2 | Kosmos-2 | λ™μΌ |
| **Fine-tuning** | Full FT | LoRA | λ©”λ¨λ¦¬ ν¨μ¨ |
| **Action Space** | 7D | 2D | λ¨λ°”μΌ λ΅λ΄‡ |
| **Dataset** | 24K episodes | 13 β†’ 100 | μμ§‘ μ¤‘ |
| **Epochs** | 5 | 50 | μ μ€ λ°μ΄ν„° |
| **Learning Rate** | 2e-5 | 1e-4 | LoRA ν•™μµλ¥  |
| **Batch Size** | 4 | 2 | λ©”λ¨λ¦¬ μ μ•½ |
| **Window Size** | 16 | 8 | λ©”λ¨λ¦¬ μ μ•½ |
| **Hidden Size** | 1024 | 512 | κ²½λ‰ν™” |
| **Trainable %** | 100% | <1% | LoRA |
| **ν•™μµ μ‹κ°„** | ~μ μ‹κ°„ | ~4-8μ‹κ°„ (50 epoch) | μμƒ |

---

## π― λ‹¤μ λ§μΌμ¤ν†¤

### λ‹¨κΈ° (μ΄λ² μ£Ό)
1. β… 1 μ—ν¬ν¬ ν•™μµ μ™„λ£ λ° μ‹κ°„ μΈ΅μ •
2. β³ 50 μ—ν¬ν¬ μ „μ²΄ ν•™μµ
3. β³ ν•™μµ κ²°κ³Ό λ¶„μ„ (Loss, μλ ΄ μ—¬λ¶€)

### μ¤‘κΈ° (μ΄λ² λ‹¬)
1. β³ 100 Dataset μμ§‘
2. β³ μ¬ν•™μµ (100 λ°μ΄ν„°)
3. β³ μ¶”λ΅  ν…μ¤νΈ (Jetson)
4. β³ μ„±λ¥ ν‰κ°€

### μ¥κΈ° (λ°©ν•™ μ¤‘)
1. β³ 1000 Dataset μμ§‘
2. β³ λ‹¤μ–‘ν• μ‹λ‚λ¦¬μ¤ ν…μ¤νΈ
3. β³ λ…Όλ¬Έ μ‘μ„± (2-3κ°)
4. β³ λ…Όλ¬Έ ν¬κ³ 

---

## π“ μ£Όμ” νμΌ μ„μΉ

### Config
```
Mobile_VLA/configs/mobile_vla_20251106_lora.json
```

### λ°μ΄ν„°μ…‹
```
ROS_action/mobile_vla_dataset/episode_20251106_*.h5
```

### ν•™μµ μ¤ν¬λ¦½νΈ
```
run_lora_1epoch.sh
```

### λ΅κ·Έ
```
lora_1epoch_output.log
```

### μ²΄ν¬ν¬μΈνΈ (ν•™μµ ν›„)
```
runs/mobile_vla_lora_20251106/checkpoints/
```

---

## π” κΈ°μ μ  μ„Έλ¶€μ‚¬ν•­

### LoRA μ„¤μ •
```json
{
  "lora_enable": true,
  "lora_r": 32,
  "lora_alpha": 16,
  "lora_dropout": 0.1,
  "freeze_backbone": true,
  "train_vision": false,
  "train_text_embedding": false
}
```

### Action Head μ„¤μ •
```json
{
  "type": "LSTMDecoder",
  "hidden_size": 512,
  "action_dim": 2,
  "action_space": "continuous",
  "with_history": true,
  "history_type": "post"
}
```

### λ°μ΄ν„° μ „μ²λ¦¬
- μ΄λ―Έμ§€: 720x1280 β†’ 224x224 (resize)
- μ •κ·ν™”: ImageNet mean/std
- μ•΅μ…: [-1, 1] μ •κ·ν™”
- Window: 8 ν”„λ μ„ νμ¤ν† λ¦¬
- Chunk: 10 ν”„λ μ„ λ―Έλ μμΈ΅

---

## β“ μμƒ μ§λ¬Έ & λ‹µλ³€

### Q1: μ™ LoRAλ¥Ό μ„ νƒν–λ‚μ”?
**A**: Jetson 16GB λ©”λ¨λ¦¬ μ μ•½κ³Ό μ μ€ λ°μ΄ν„°(13β†’100κ°)λ΅ μΈν•΄ Full Fine-tuningμ€ κ³Όμ ν•© μ„ν—μ΄ μμµλ‹λ‹¤. LoRAλ” νλΌλ―Έν„° <1%λ§ ν•™μµν•μ—¬ λ©”λ¨λ¦¬ ν¨μ¨μ μ΄λ©°, λ°°ν¬ μ‹ LoRA μ–΄λ‘ν„°λ§ μ €μ¥ν•λ©΄ λ©λ‹λ‹¤(~50MB).

### Q2: 13κ° μ—ν”Όμ†λ“λ΅ ν•™μµμ΄ κ°€λ¥ν•κ°€μ”?
**A**: ν„μ¬λ” μ‹κ°„ μΈ΅μ • λ° νμ΄ν”„λΌμΈ κ²€μ¦ λ©μ μ…λ‹λ‹¤. μ‹¤μ  μ„±λ¥ ν–¥μƒμ„ μ„ν•΄μ„λ” 100κ° μ΄μƒ λ°μ΄ν„°κ°€ ν•„μ”ν•λ©°, μµμΆ…μ μΌλ΅ 1000κ°λ¥Ό λ©ν‘λ΅ ν•©λ‹λ‹¤.

### Q3: RoboVLMsμ™€μ μ°¨μ΄μ μ€?
**A**: 
- **Action Space**: 7D λ§¤λ‹ν“°λ μ΄ν„° β†’ 2D λ¨λ°”μΌ λ΅λ΄‡
- **Fine-tuning**: Full FT β†’ LoRA
- **Dataset**: 24K episodes β†’ 13β†’100β†’1000
- **Hardware**: RTX 4090/A100 β†’ Jetson AGX Orin 16GB

### Q4: 1 μ—ν¬ν¬ ν•™μµ μ‹κ°„μ€?
**A**: ν„μ¬ μ§„ν–‰ μ¤‘μ΄λ©°, μμƒ μ‹κ°„μ€ 5-10λ¶„μ…λ‹λ‹¤. μΈ΅μ • μ™„λ£ ν›„ 50 μ—ν¬ν¬ μ „μ²΄ ν•™μµ μ‹κ°„μ„ μ¶”μ •ν•  μ μμµλ‹λ‹¤.

### Q5: λ‹¤μ λ‹¨κ³„λ”?
**A**: 
1. 1 μ—ν¬ν¬ μ™„λ£ λ° μ‹κ°„ μΈ΅μ •
2. 50 μ—ν¬ν¬ μ „μ²΄ ν•™μµ
3. 100 Dataset μμ§‘
4. μ¬ν•™μµ λ° μ„±λ¥ ν‰κ°€
5. μ¶”λ΅  ν…μ¤νΈ (Jetson)

---

**μ‘μ„±μΌ**: 2025-11-06  
**μ‘μ„±μ**: Mobile VLA Team  
**μƒνƒ**: LoRA Fine-tuning 1 μ—ν¬ν¬ μ§„ν–‰ μ¤‘  
**λ‹¤μ λ―Έν…**: ν•™μµ μ™„λ£ ν›„ κ²°κ³Ό λ³΄κ³ 


